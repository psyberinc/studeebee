!function(e,t,n,i){t.addEventListener("dragover",function(e){(e=e||event).preventDefault()},!1),t.addEventListener("drop",function(e){(e=e||event).preventDefault()},!1);const a=(e,t,n)=>{if(e.length<2&&"*"===e[0])return!0;for(let i=1;i<e.length;i+=3){if("*"===e[i+1]&&-1!=t.search(new RegExp(e[i])))return!0;if(e[i+1]&&"*"!=e[i+1]&&-1!=t.search(new RegExp("\\*"+e[i+1]+"\\*")))return!0;if(e[i+1]&&"*"!=e[i+1]&&-1!=t.search(new RegExp(e[i+1])))return!0;if(""===e[i+1]&&(-1!=t.search(new RegExp(e[i]))||-1!=n.search(new RegExp(e[i]))))return!0}return!1};e.fn.imageuploadify=function(n){e.extend({},e.fn.imageuploadify.defaults,n);return this.each(function(){const n=this;if(!e(n).attr("multiple"))return;let i=e(n).attr("accept")?e(n).attr("accept").replace(/\s/g,"").split(","):null,s=[];i.forEach(e=>{let t;const n=(t=-1!=e.search(/\//)?new RegExp("([A-Za-z-.]*)/([A-Za-z-*.]*)","g"):new RegExp(".([A-Za-z-]*)()","g")).exec(e);s=s.concat(n)});let o=[],r=0,l=e('<div class="imageuploadify well"><div class="imageuploadify-overlay"><i class="fa fa-picture-o"></i></div><div class="imageuploadify-images-list text-center"><i class="fa fa-cloud-upload"></i><span class=\'imageuploadify-message\'>Drag&Drop Your File(s)Here To Upload</span><button type="button"class="btn btn-default">or select file to upload</button></div></div>'),c=l.find(".imageuploadify-overlay"),p=(l.find(".imageuploadify-overlay i"),l.find(".imageuploadify-images-list")),f=l.find(".imageuploadify-images-list i"),d=l.find(".imageuploadify-images-list span"),u=l.find(".imageuploadify-images-list button");const g=e=>{for(let t=0;t<e.length;++t)if(!i||a(s,e[t].type,/(?:\.([^.]+))?$/.exec(e[t].name)[1])){const n=Math.random().toString(36).substr(2,9);h(n,e[t]),o.push({id:n,file:e[t]})}},h=(t,n)=>{const i=new FileReader,a=l.width(),s=Math.floor(a/100),r=Math.floor((a-100*s)/(s+1));let c=e(`<div class='imageuploadify-container'><button type='button'class='btn btn-danger fa fa-close'></button><div class='imageuploadify-details'><span>${n.name}</span><span>${n.type}</span><span>${n.size}</span></div></div>`),f=c.find(".imageuploadify-details"),d=c.find("button");if(c.css("margin-left",r+"px"),f.hover(function(){e(this).css("opacity","1")}).mouseleave(function(){e(this).css("opacity","0")}),n.type&&-1!=n.type.search(/image/))i.onloadend=function(t){let n=e("<img>");n.attr("src",t.target.result),c.append(n),p.append(c),p.find(".imageuploadify-container:nth-child("+s+"n+4)").css("margin-left",r+"px"),p.find(".imageuploadify-container:nth-child("+s+"n+3)").css("margin-right",r+"px")};else if(n.type){let t="<i class='fa fa-file'></i>";-1!=n.type.search(/audio/)?t="<i class='fa fa-file-audio-o'></i>":-1!=n.type.search(/video/)&&(t="<i class='fa fa-file-video-o'></i>"),i.onloadend=function(n){let i=e("<span>"+t+"</span>");i.css("font-size","5em"),c.append(i),p.append(c),p.find(".imageuploadify-container:nth-child("+s+"n+4)").css("margin-left",r+"px"),p.find(".imageuploadify-container:nth-child("+s+"n+3)").css("margin-right",r+"px")}}d.on("click",function(){e(this.parentElement).remove();for(let e=0;o.length>e;++e)if(o[e].id===t){o.splice(e,1);break}}),i.readAsDataURL(n)},m=()=>{c.css("display","none"),l.css("border-color","rgb(210, 210, 210)"),u.css("pointer-events","initial"),d.css("pointer-events","initial"),f.css("pointer-events","initial"),p.css("pointer-events","initial")};u.mouseenter(function(e){u.css("background","#3AA0FF").css("color","white")}).mouseleave(function(){u.css("background","white").css("color","#3AA0FF")}),u.on("click",function(t){t.stopPropagation(),t.preventDefault(),e(n).click()}),l.on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),r++,c.css("display","flex"),l.css("border-color","#3AA0FF"),u.css("pointer-events","none"),d.css("pointer-events","none"),f.css("pointer-events","none"),p.css("pointer-events","none")}),l.on("dragleave",function(e){e.stopPropagation(),e.preventDefault(),0===--r&&m()}),l.on("drop",function(e){e.stopPropagation(),e.preventDefault(),m();const t=e.originalEvent.dataTransfer.files;g(t)}),e(t).bind("resize",function(n){t.resizeEvt,e(t).resize(function(){clearTimeout(t.resizeEvt),t.resizeEvt=setTimeout(function(){const t=l.width(),n=Math.floor(t/100),i=Math.floor((t-100*n)/(n+1));let a=p.find(".imageuploadify-container");for(let t=0;t<a.length;++t)e(a[t]).css("margin-right","0px"),e(a[t]).css("margin-left",i+"px");p.find(".imageuploadify-container:nth-child("+n+"n+4)").css("margin-left",i+"px"),p.find(".imageuploadify-container:nth-child("+n+"n+3)").css("margin-right",i+"px")},500)})}),e(n).on("change",function(){const e=this.files;g(e)}),e(n).closest("form").on("submit",function(i){i.stopPropagation(),i.preventDefault(i);const a=this.querySelectorAll("input, textarea, select, button"),s=new FormData;for(let t=0;t<a.length;++t)if("SELECT"===a[t].tagName&&a[t].hasAttribute("multiple")){const e=a[t].options;for(let n=0;e.length>n;++n)e[n].selected&&s.append(a[t].getAttribute("name"),e[n].value)}else!a[t].getAttribute("type")||"checkbox"!==a[t].getAttribute("type").toLowerCase()&&"radio"!==a[t].getAttribute("type").toLowerCase()||a[t].checked?s.append(a[t].name,a[t].value):"file"!=e(a[t]).getAttribute("type")&&s.append(a[t].name,a[t].value);for(var r=0;r<o.length;r++)s.append(n.name,o[r].file);var l=new XMLHttpRequest;return l.onreadystatechange=function(e){200==l.status&&l.readyState===XMLHttpRequest.DONE&&t.location.replace(l.responseURL)},l.open("../error-404.html",e(this).attr("action"),!0),l.send(s),!1}),e(n).hide(),l.insertAfter(this)}),this},e.fn.imageuploadify.defaults={}}(jQuery,window,document);
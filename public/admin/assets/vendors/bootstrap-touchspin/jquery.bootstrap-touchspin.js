!function(t){"use strict";function o(o,n){return t.map(o,function(t){return function(t,o){return t+".touchspin_"+o}(t,n)})}var n=0;t.fn.TouchSpin=function(s){if("destroy"!==s){var a={min:0,max:100,initval:"",replacementval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalupclass:"fa fa-angle-up",verticaldownclass:"fa fa-angle-down",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default",buttondown_txt:"-",buttonup_txt:"+"},e={min:"min",max:"max",initval:"init-val",replacementval:"replacement-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){function s(o){m=t.extend({},m,o)}function i(o){o.addClass("bootstrap-touchspin");var n,s,a=k.prev(),e=k.next(),i='<span class="input-group-addon bootstrap-touchspin-prefix">'+m.prefix+"</span>",u='<span class="input-group-addon bootstrap-touchspin-postfix">'+m.postfix+"</span>";a.hasClass("input-group-btn")?(n='<button class="'+m.buttondown_class+' bootstrap-touchspin-down" type="button">'+m.buttondown_txt+"</button>",a.append(n)):(n='<span class="input-group-btn"><button class="'+m.buttondown_class+' bootstrap-touchspin-down" type="button">'+m.buttondown_txt+"</button></span>",t(n).insertBefore(k)),e.hasClass("input-group-btn")?(s='<button class="'+m.buttonup_class+' bootstrap-touchspin-up" type="button">'+m.buttonup_txt+"</button>",e.prepend(s)):(s='<span class="input-group-btn"><button class="'+m.buttonup_class+' bootstrap-touchspin-up" type="button">'+m.buttonup_txt+"</button></span>",t(s).insertAfter(k)),t(i).insertBefore(k),t(u).insertAfter(k),x=o}function u(){var o;o=m.verticalbuttons?'<div class="input-group bootstrap-touchspin"><span class="input-group-addon bootstrap-touchspin-prefix">'+m.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+m.postfix+'</span><span class="input-group-btn-vertical"><button class="'+m.buttondown_class+' bootstrap-touchspin-up" type="button"><i class="'+m.verticalupclass+'"></i></button><button class="'+m.buttonup_class+' bootstrap-touchspin-down" type="button"><i class="'+m.verticaldownclass+'"></i></button></span></div>':'<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="'+m.buttondown_class+' bootstrap-touchspin-down" type="button">'+m.buttondown_txt+'</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+m.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+m.postfix+'</span><span class="input-group-btn"><button class="'+m.buttonup_class+' bootstrap-touchspin-up" type="button">'+m.buttonup_txt+"</button></span></div>",x=t(o).insertBefore(k),t(".bootstrap-touchspin-prefix",x).after(k),k.hasClass("input-sm")?x.addClass("input-group-sm"):k.hasClass("input-lg")&&x.addClass("input-group-lg")}function p(){g={down:t(".bootstrap-touchspin-down",x),up:t(".bootstrap-touchspin-up",x),input:t("input",x),prefix:t(".bootstrap-touchspin-prefix",x).addClass(m.prefix_extraclass),postfix:t(".bootstrap-touchspin-postfix",x).addClass(m.postfix_extraclass)}}function r(){k.on("keydown",function(t){var o=t.keyCode||t.which;38===o?("up"!==N&&(d(),v()),t.preventDefault()):40===o&&("down"!==N&&(f(),b()),t.preventDefault())}),k.on("keyup",function(t){var o=t.keyCode||t.which;38===o?h():40===o&&h()}),k.on("blur",function(){c()}),g.down.on("keydown",function(t){var o=t.keyCode||t.which;(32===o||13===o)&&("down"!==N&&(f(),b()),t.preventDefault())}),g.down.on("keyup",function(t){var o=t.keyCode||t.which;(32===o||13===o)&&h()}),g.up.on("keydown",function(t){var o=t.keyCode||t.which;(32===o||13===o)&&("up"!==N&&(d(),v()),t.preventDefault())}),g.up.on("keyup",function(t){var o=t.keyCode||t.which;(32===o||13===o)&&h()}),g.down.on("mousedown.touchspin",function(t){g.down.off("touchstart.touchspin"),k.is(":disabled")||(f(),b(),t.preventDefault(),t.stopPropagation())}),g.down.on("touchstart.touchspin",function(t){g.down.off("mousedown.touchspin"),k.is(":disabled")||(f(),b(),t.preventDefault(),t.stopPropagation())}),g.up.on("mousedown.touchspin",function(t){g.up.off("touchstart.touchspin"),k.is(":disabled")||(d(),v(),t.preventDefault(),t.stopPropagation())}),g.up.on("touchstart.touchspin",function(t){g.up.off("mousedown.touchspin"),k.is(":disabled")||(d(),v(),t.preventDefault(),t.stopPropagation())}),g.up.on("mouseout touchleave touchend touchcancel",function(t){N&&(t.stopPropagation(),h())}),g.down.on("mouseout touchleave touchend touchcancel",function(t){N&&(t.stopPropagation(),h())}),g.down.on("mousemove touchmove",function(t){N&&(t.stopPropagation(),t.preventDefault())}),g.up.on("mousemove touchmove",function(t){N&&(t.stopPropagation(),t.preventDefault())}),t(document).on(o(["mouseup","touchend","touchcancel"],n).join(" "),function(t){N&&(t.preventDefault(),h())}),t(document).on(o(["mousemove","touchmove","scroll","scrollstart"],n).join(" "),function(t){N&&(t.preventDefault(),h())}),k.on("mousewheel DOMMouseScroll",function(t){if(m.mousewheel&&k.is(":focus")){var o=t.originalEvent.wheelDelta||-t.originalEvent.deltaY||-t.originalEvent.detail;t.stopPropagation(),t.preventDefault(),0>o?f():d()}})}function c(){var t,o,n;return""===(t=k.val())?void(""!==m.replacementval&&(k.val(m.replacementval),k.trigger("change"))):void(m.decimals>0&&"."===t||(o=parseFloat(t),isNaN(o)&&(o=""!==m.replacementval?m.replacementval:0),n=o,o.toString()!==t&&(n=o),o<m.min&&(n=m.min),o>m.max&&(n=m.max),n=function(t){switch(m.forcestepdivisibility){case"round":return(Math.round(t/m.step)*m.step).toFixed(m.decimals);case"floor":return(Math.floor(t/m.step)*m.step).toFixed(m.decimals);case"ceil":return(Math.ceil(t/m.step)*m.step).toFixed(m.decimals);default:return t}}(n),Number(t).toString()!==n.toString()&&(k.val(n),k.trigger("change"))))}function l(){if(m.booster){var t=Math.pow(2,Math.floor(M/m.boostat))*m.step;return m.maxboostedstep&&t>m.maxboostedstep&&(t=m.maxboostedstep,w=Math.round(w/t)*t),Math.max(m.step,t)}return m.step}function d(){c(),w=parseFloat(g.input.val()),isNaN(w)&&(w=0);var t=w,o=l();(w+=o)>m.max&&(w=m.max,k.trigger("touchspin.on.max"),h()),g.input.val(Number(w).toFixed(m.decimals)),t!==w&&k.trigger("change")}function f(){c(),w=parseFloat(g.input.val()),isNaN(w)&&(w=0);var t=w,o=l();(w-=o)<m.min&&(w=m.min,k.trigger("touchspin.on.min"),h()),g.input.val(w.toFixed(m.decimals)),t!==w&&k.trigger("change")}function b(){h(),M=0,N="down",k.trigger("touchspin.on.startspin"),k.trigger("touchspin.on.startdownspin"),C=setTimeout(function(){y=setInterval(function(){M++,f()},m.stepinterval)},m.stepintervaldelay)}function v(){h(),M=0,N="up",k.trigger("touchspin.on.startspin"),k.trigger("touchspin.on.startupspin"),D=setTimeout(function(){_=setInterval(function(){M++,d()},m.stepinterval)},m.stepintervaldelay)}function h(){switch(clearTimeout(C),clearTimeout(D),clearInterval(y),clearInterval(_),N){case"up":k.trigger("touchspin.on.stopupspin"),k.trigger("touchspin.on.stopspin");break;case"down":k.trigger("touchspin.on.stopdownspin"),k.trigger("touchspin.on.stopspin")}M=0,N=!1}var m,x,g,w,y,_,C,D,k=t(this),F=k.data(),M=0,N=!1;!function(){if(!k.data("alreadyinitialized")){if(k.data("alreadyinitialized",!0),n+=1,k.data("spinnerid",n),!k.is("input"))return void console.log("Must be an input.");""!==(m=t.extend({},a,F,function(){var o={};return t.each(e,function(t,n){var s="bts-"+n;k.is("[data-"+s+"]")&&(o[t]=k.data(s))}),o}(),o)).initval&&""===k.val()&&k.val(m.initval),c(),t=k.val(),o=k.parent(),""!==t&&(t=Number(t).toFixed(m.decimals)),k.data("initvalue",t).val(t),k.addClass("form-control"),o.hasClass("input-group")?i(o):u(),p(),""===m.prefix&&g.prefix.hide(),""===m.postfix&&g.postfix.hide(),r(),k.on("touchspin.uponce",function(){h(),d()}),k.on("touchspin.downonce",function(){h(),f()}),k.on("touchspin.startupspin",function(){v()}),k.on("touchspin.startdownspin",function(){b()}),k.on("touchspin.stopspin",function(){h()}),k.on("touchspin.updatesettings",function(t,o){!function(t){s(t),c();var o=g.input.val();""!==o&&(o=Number(g.input.val()),g.input.val(o.toFixed(m.decimals)))}(o)}),g.input.css("display","block")}var t,o}()})}this.each(function(){var n=t(this).data();t(document).off(o(["mouseup","touchend","touchcancel","mousemove","touchmove","scroll","scrollstart"],n.spinnerid).join(" "))})}}(jQuery);